<?sdsim about='R package for modeling and simulation of system dynamics' version='0.1' date='2018-04-11'?>
<sdOdeModel>
  <id>BouncingBall</id>
  <description>Source: Soetaert K., Cash_J., Mazzia F. - Solving Differential Equations in R - Springer(2012)
Simulates a bouncing ball specified by its position above the ground (height). The ball is thrown vertically, from the ground (height(0) = 0 meter), with initial velocity (speed) of 10 meter / second. 
As the ball hits the ground, it bounces. This causes a sudden change in the value of the ballâ€™s velocity (a sign-reversal and reduction of its magnitude directly proportional to the coefficient of restitution (k)).</description>
  <DifferentialEquations>function (t, st, ct, par, inp, sw, aux) 
{
    dHeight &lt;- st$speed
    dSpeed &lt;- -ct$gravity
    return(list(c(dHeight, dSpeed)))
}</DifferentialEquations>
  <InitVars/>
  <PostProcessVars/>
  <RootSpecification>function (t, st, ct, par, inp, sw, aux) 
{
    if (st$height &lt;= 0 &amp;&amp; st$speed &lt; 0) 
        return(0)
    else return(1)
}</RootSpecification>
  <EventFunction>function (t, st, ct, par, inp, sw, aux) 
{
    st$height &lt;- 0
    st$speed &lt;- -inp$k * st$speed
    return(st)
}</EventFunction>
  <aux/>
  <globalFunctions/>
  <defaultScenario>
    <sdScenario>
      <id>Default</id>
      <times>
        <from>0</from>
        <to>23</to>
        <by>0.01</by>
      </times>
      <method>lsoda</method>
      <state>
        <height>0</height>
        <speed>10</speed>
      </state>
      <constant>
        <gravity>9.8</gravity>
      </constant>
      <input>
        <k>0.9</k>
      </input>
      <interpolation/>
      <parameter/>
      <switch/>
      <unit>
        <gravity>meter / second ^ 2</gravity>
        <height>meter</height>
        <k>dimensionless</k>
        <speed>meter / second</speed>
        <time>second</time>
      </unit>
      <description>
        <gravity>the gravity of Earth</gravity>
        <height>initial height of the ball</height>
        <k>coefficient of restitution</k>
        <speed>initial speed of the ball</speed>
      </description>
    </sdScenario>
  </defaultScenario>
</sdOdeModel>